---
title: 嵌入式开发 AM335x
date: 2016-01-07T16:46:14+08:00
update: 2016-01-01
categories: [嵌入式Linux]
tags: [Linux命令]
---
[TI Resource Explorer](http://dev.ti.com/tirex/#/?link=Sitara)
[PROCESSOR-SDK-LINUX-AM335X](http://software-dl.ti.com/processor-sw/esd/PROCESSOR-SDK-LINUX-AM335X/latest/index_FDS.html)
[AM335x(TQ335x)移植笔记](http://blog.csdn.net/girlkoo/article/category/907322)
[为AM335x移植Linux内核主线代码](http://bbs.ednchina.com/BLOG_PERSONALCAT_101071_2002381.HTM)
[TI am335x sdk安装过程记录](http://blog.csdn.net/gongyuan073/article/list/1)

第一部分 sdk的组成
beaglebone black出厂是带的debian的系统, 除此之外TI还提供了一个sdk, 这个sdk由以下几部分组成
1. 预编译好的 SPL /uboot /kernel /dtb的镜像, 在 sdk/baord_support/prebuilt-images 下: 其中 uboot-spl.bin-am335x-evm 是板子的初始化程序, 这个程序运行之后可以引导uboot(u-boot-am335x-evm.img) , uboot运行起来之后可以引导内核(zImage-am335x-evm.bin) ,新版的内核首先使用dts来给内核提供设备信息, 而不是原来的TAGS方式. 这个dts编译之后是dtb文件(am335x-boneblack.dtb). 有了这些文件我们就可以重新烧写整个系统了. 在以后的开发过程中如果想切换回最开始的系统只需要找个sd卡将这些文件烧写到sd卡中, 从sd卡启动就好了.
2.  uboot / kernel 的源码: sdk/board-support / u-boot-2014.07-g7e537bf 和 sdk /board-support / linux-3.14.26-g2489c02, 有这些源码就可以开始开发工作了
3. 完整的交叉编译链: sdk /linux-devkit/sysroots/i686-arago-linux/usr/bin , 将这个路径添加到环境变量中就可以使用了. 添加方法: 打开 /etc/environment 把这个路径添加到末尾, 执行source /etc/environment 就可以使用了
第二部分 sdk的安装
首先到TI[下载sdk](http://software-dl.ti.com/sitara_linux/esd/processor-sdk/PROCESSOR-SDK-LINUX-AM335X/latest/index_FDS.html),
[plain] view plain copy
sudo ./ti-processor-sdk-linux-am335x-evm-01.00.00.00-Linux-x86-Install.bin  
然后是图形界面选择安装路径

在sdk目录下TI提供了一个脚本, 执行这个脚本就会帮忙做好以下几件事情(执行之前要保证系统已经可以联网了)安装完成之后进入sdk目录执行:
[plain] view plain copy
sudo ./setup.sh  
1. 建立tftp环境,  创建/tftpboot目录作为tftp的目录, 并且脚本会自动把需要的镜像放到这个目录下边
2. 建立nfs环境, 创建sdk/targetNFS为nfs目录, 文件系统也已经复制到这个文件夹下边

接下来就可以开始编译uboot和内核了, 而顶层的Makefile已经帮我们弄好了我们只需要执行一条指令就可以将这两者编译完成:
[plain] view plain copy
sudo make ARCH=arm all  

然后就开始了漫长的编译过程...

基本上只需要执行这两个命令,一切都已经弄好了, 只需要你自己将交叉编译链的目录添加到环境变量里即可.

第三部分 linux下烧写sd卡
