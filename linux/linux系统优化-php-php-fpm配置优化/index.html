<!DOCTYPE html>
<html lang="zh-CN" class="no-js">
<head>
  <base href="http://blog.pytool.com/">
  <title>Linux  php-fpm 优化 </title>
  
  <meta charset="UTF-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
  <meta name="description" content="前言: 1.少安装PHP模块, 费内存 2.调高linux内核打开文件数量，可以使用这些命令(必须是root帐号)(我是修改/etc/rc.loc">
  <meta name="author" content=rinetd>
  <meta name="publisher" content=rinetd@163.com>

  <meta itemprop="name" content="Linux  php-fpm 优化 - 时光小栈">
  <meta itemprop="description" content="前言: 1.少安装PHP模块, 费内存 2.调高linux内核打开文件数量，可以使用这些命令(必须是root帐号)(我是修改/etc/rc.loc">
  <meta itemprop="image" content="http://blog.pytool.com/public/avatar.png">
  
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Linux  php-fpm 优化 - 时光小栈" />
  <meta property="og:description" content="前言: 1.少安装PHP模块, 费内存 2.调高linux内核打开文件数量，可以使用这些命令(必须是root帐号)(我是修改/etc/rc.loc">
  <meta property="og:image" content="http://blog.pytool.com/public/avatar.png" />
  <meta property="og:url" content="http://blog.pytool.com/linux/linux%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96-php-php-fpm%E9%85%8D%E7%BD%AE%E4%BC%98%E5%8C%96/" />
  
  <meta name="baidu-site-verification" content="pCInWQYbNT" />
  <meta name="google-site-verification" content="ifeWsnNpU7w8vP3ii_Cjq-P9LKw3ngVitnMWv4XmJqk" />
  






  <link rel="canonical" href="../../linux/linux%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96-php-php-fpm%E9%85%8D%E7%BD%AE%E4%BC%98%E5%8C%96/">
  <link rel='shortlink' href="http://blog.pytool.com/linux/linux%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96-php-php-fpm%E9%85%8D%E7%BD%AE%E4%BC%98%E5%8C%96/"/>
  <link rel="shortcut icon" href="../../public/favicon.ico"/>

  
  
  

  
  

  <link rel="stylesheet" href="../../front/css/main.css" >
  <link rel="stylesheet" href="../../front/css/font-awesome.min.css" >
  

  
  









  




  
  <meta name="author" content="" />
  <meta name="description" content="Don&#39;t put any lines in your CODE that you don&#39;t understand" />

  
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@gohugoio" />
  <meta name="twitter:title" content="时光小栈" />
  <meta name="twitter:description" content="Don&#39;t put any lines in your CODE that you don&#39;t understand" />
  <meta name="twitter:image" content="http://elmah.ir/img/twittercard.png" />




<meta name="generator" content="Hugo 0.37" />


<link rel="canonical" href="http://blog.pytool.com/linux/linux%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96-php-php-fpm%E9%85%8D%E7%BD%AE%E4%BC%98%E5%8C%96/" />
<link rel="alternative" href="../../index.xml" title="时光小栈" type="application/atom+xml" />


<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="format-detection" content="telephone=no,email=no,adress=no" />
<meta http-equiv="Cache-Control" content="no-transform" />


<meta name="robots" content="index,follow" />
<meta name="referrer" content="origin-when-cross-origin" />







<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="时光小栈" />
<meta name="msapplication-tooltip" content="时光小栈" />
<meta name='msapplication-navbutton-color' content="#5fbf5e" />
<meta name="msapplication-TileColor" content="#5fbf5e" />
<meta name="msapplication-TileImage" content="/img/tile-image-windows.png" />
<link rel="icon" href="../../img/favicon.ico" />
<link rel="icon" type="image/png" sizes="16x16" href="../../img/favicon-16x16.png" />
<link rel="icon" type="image/png" sizes="32x32" href="../../img/favicon-32x32.png" />
<link rel="icon" sizes="192x192" href="../../img/touch-icon-android.png" />
<link rel="apple-touch-icon" href="../../img/touch-icon-apple.png" />
<link rel="mask-icon" href="../../img/safari-pinned-tab.svg" color="#5fbf5e" />



<link rel="stylesheet" href="//cdn.bootcss.com/video.js/6.2.8/alt/video-js-cdn.min.css" />

</head>
<body class="single single-post single-format-standard col-3cm full-width topbar-enabled chrome">
<div id="wrapper">
  <header id="header" class="top-menu-mobile-on one-mobile-menu top_menu header-ads-desktop  topbar-transparent">
    
  <nav class="nav-container group mobile-menu mobile-sticky " id="nav-mobile" data-menu-id="header-1">
    <div class="mobile-title-logo-in-header">
        <p class="site-title">
            <a class="custom-logo-link" href="http://blog.pytool.com" rel="home" title="Pytool | Home ">
                
                Pytool
            </a>
        </p>
    </div>
    <div class="ham__navbar-toggler-two collapsed" title="Menu" aria-expanded="false">
        <div class="ham__navbar-span-wrapper">
            <span class="line line-1"></span>
            <span class="line line-2"></span>
            <span class="line line-3"></span>
        </div>
    </div>
    <div class="nav-text">Linux  php-fpm 优化</div>
    <div class="nav-wrap container">
        <ul class="nav container-inner group mobile-search">
            <li>
                <form method="get" class="searchform themeform" action="https://demo-hueman.presscustomizr.com/">
                    <div>
                        <input type="text" class="search" name="s" onblur="if(this.value=='')this.value='To search type and hit enter';" onfocus="if(this.value=='To search type and hit enter')this.value='';" value="To search type and hit enter"/>
                    </div>
                </form>
            </li>
        </ul>
        <ul id="menu-topbar-menu" class="nav container-inner group">
        
            <li class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home ">
            <a href="http://blog.pytool.com ">Home</a>
            </li>

        
            
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                
                <a rel="nofollow" href="../../awesome/">Awesome </a>
                
                        

              </li>
            
        
            
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                
                <a rel="nofollow" href="../../basic/">Basic </a>
                
                        

              </li>
            
        
            
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                
                <a rel="nofollow" href="../../database/">Database </a>
                
                                 
                            <ul class="sub-menu">
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/database/mongo/">Mongo</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/database/mysql/">Mysql</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/database/redis/">Redis</a>
                                
                                            
                                        
                                </li>                
                            
                            </ul>
                        

              </li>
            
        
            
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                
                <a rel="nofollow" href="../../devops/">Devops </a>
                
                                 
                            <ul class="sub-menu">
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/devops/oauth2/">OAuth2</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/devops/ansible/">Ansible</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/devops/docker/">Docker</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/devops/drone/">Drone</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/devops/elk/">Elk</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/devops/etcd/">Etcd</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/devops/git/">Git</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/devops/kubernetes/">Kubernetes</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/devops/prometheus/">Prometheus</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/devops/%E6%96%87%E6%A1%A3%E7%94%9F%E6%88%90%E5%99%A8/">文档生成器</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/devops/%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7/">系统监控</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/devops/%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/">自动部署</a>
                                
                                            
                                        
                                </li>                
                            
                            </ul>
                        

              </li>
            
        
            
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                
                <a rel="nofollow" href="../../edit/">Edit </a>
                
                        

              </li>
            
        
            
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                
                <a rel="nofollow" href="../../frontend/">Frontend </a>
                
                                 
                            <ul class="sub-menu">
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/frontend/css/">Css</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/frontend/vue/">Vue</a>
                                
                                            
                                        
                                </li>                
                            
                            </ul>
                        

              </li>
            
        
            
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                
                <a rel="nofollow" href="../../hacker/">Hacker </a>
                
                        

              </li>
            
        
            
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                
                <a rel="nofollow" href="../../hardware/">Hardware </a>
                
                                 
                            <ul class="sub-menu">
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/hardware/%E8%BD%A6%E8%81%94%E7%BD%91/">车联网</a>
                                
                                            
                                        
                                </li>                
                            
                            </ul>
                        

              </li>
            
        
            
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                
                <a rel="nofollow" href="../../language/">Language </a>
                
                                 
                            <ul class="sub-menu">
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/language/android/">Android</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/language/golang/">Golang</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/language/php/">Php</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/language/python/">Python</a>
                                
                                            
                                        
                                </li>                
                            
                            </ul>
                        

              </li>
            
        
            
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                
                <a rel="nofollow" href="../../linux/">Linux </a>
                
                                 
                            <ul class="sub-menu">
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/linux/cmd/">Cmd</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/linux/haproxy/">Haproxy</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/linux/ip/">Ip</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/linux/lvs/">Lvs</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/linux/nginx/">Nginx</a>
                                
                                            
                                        
                                </li>                
                            
                                <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                <a href="http://blog.pytool.com/linux/shell/">Shell</a>
                                
                                            
                                        
                                </li>                
                            
                            </ul>
                        

              </li>
            
        
            
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                
                <a rel="nofollow" href="../../math/">Math </a>
                
                        

              </li>
            
        
            
        
            
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                
                <a rel="nofollow" href="../../software/">Software </a>
                
                        

              </li>
            
        
            
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                
                <a rel="nofollow" href="../../wiki/">Wiki </a>
                
                        

              </li>
            
        
            
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children">
                
                <a rel="nofollow" href="../../windows/">Windows </a>
                
                        

              </li>
            
        
        
        <li class="item ">
                <a class="text" href="../../me/">about</a>
        </li>

        
        </ul>
    </div>
  </nav>
    
  <nav class="nav-container group desktop-menu desktop-sticky " id="nav-topbar" data-menu-id="header-2">
    <div class="nav-text">Linux  php-fpm 优化</div>
    
    <div class="topbar-toggle-down">
        <i class="fas fa-angle-double-down" aria-hidden="true" data-toggle="down" title="Expand menu"></i>
        <i class="fas fa-angle-double-up" aria-hidden="true" data-toggle="up" title="Collapse menu"></i>
    </div>

    
    <div class="nav-wrap container">
      <ul id="menu-topbar-menu-1" class="nav container-inner group">
        <li class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home ">
            <a rel="nofollow" href="../../">Home</a></li>
        
            
              
                  <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children">
                <a rel="nofollow" href="../../awesome/">Awesome </a>
                
                  
              </li>
                    
        
            
              
                  <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children">
                <a rel="nofollow" href="../../basic/">Basic </a>
                
                  
              </li>
                    
        
            
              
                  <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children">
                <a rel="nofollow" href="../../database/">Database </a>
                
                           
                    <ul class="sub-menu">
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/database/mongo/">Mongo</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/database/mysql/">Mysql</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/database/redis/">Redis</a>
                          
                        </li>                
                      
                    </ul>
                  
              </li>
                    
        
            
              
                  <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children">
                <a rel="nofollow" href="../../devops/">Devops </a>
                
                           
                    <ul class="sub-menu">
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/devops/oauth2/">OAuth2</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/devops/ansible/">Ansible</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/devops/docker/">Docker</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/devops/drone/">Drone</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/devops/elk/">Elk</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/devops/etcd/">Etcd</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/devops/git/">Git</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/devops/kubernetes/">Kubernetes</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/devops/prometheus/">Prometheus</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/devops/%E6%96%87%E6%A1%A3%E7%94%9F%E6%88%90%E5%99%A8/">文档生成器</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/devops/%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7/">系统监控</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/devops/%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/">自动部署</a>
                          
                        </li>                
                      
                    </ul>
                  
              </li>
                    
        
            
              
                  <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children">
                <a rel="nofollow" href="../../edit/">Edit </a>
                
                  
              </li>
                    
        
            
              
                  <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children">
                <a rel="nofollow" href="../../frontend/">Frontend </a>
                
                           
                    <ul class="sub-menu">
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/frontend/css/">Css</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/frontend/vue/">Vue</a>
                          
                        </li>                
                      
                    </ul>
                  
              </li>
                    
        
            
              
                  <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children">
                <a rel="nofollow" href="../../hacker/">Hacker </a>
                
                  
              </li>
                    
        
            
              
                  <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children">
                <a rel="nofollow" href="../../hardware/">Hardware </a>
                
                           
                    <ul class="sub-menu">
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/hardware/%E8%BD%A6%E8%81%94%E7%BD%91/">车联网</a>
                          
                        </li>                
                      
                    </ul>
                  
              </li>
                    
        
            
              
                  <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children">
                <a rel="nofollow" href="../../language/">Language </a>
                
                           
                    <ul class="sub-menu">
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/language/android/">Android</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/language/golang/">Golang</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/language/php/">Php</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/language/python/">Python</a>
                          
                        </li>                
                      
                    </ul>
                  
              </li>
                    
        
            
              
                  <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children">
                <a rel="nofollow" href="../../linux/">Linux </a>
                
                           
                    <ul class="sub-menu">
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/linux/cmd/">Cmd</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/linux/haproxy/">Haproxy</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/linux/ip/">Ip</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/linux/lvs/">Lvs</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/linux/nginx/">Nginx</a>
                          
                        </li>                
                        
                        <li class="menu-item menu-item-type-taxonomy menu-item-object-post_tag">
                          <a href="http://blog.pytool.com/linux/shell/">Shell</a>
                          
                        </li>                
                      
                    </ul>
                  
              </li>
                    
        
            
              
                  <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children">
                <a rel="nofollow" href="../../math/">Math </a>
                
                  
              </li>
                    
        
                    
        
            
              
                  <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children">
                <a rel="nofollow" href="../../software/">Software </a>
                
                  
              </li>
                    
        
            
              
                  <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children">
                <a rel="nofollow" href="../../wiki/">Wiki </a>
                
                  
              </li>
                    
        
            
              
                  <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children">
                <a rel="nofollow" href="../../windows/">Windows </a>
                
                  
              </li>
                    
        
       
        
        <li class="menu-item menu-item-type-post_type menu-item-object-page">
          <a rel="nofollow" href="../../me/">about</a>
        </li>
        

        
      </ul>
      
    </div>
    
    
  
  </nav>
  

  
  

</header>

  <div class="container" id="page">
      <div class="container-inner">
          <div class="main">
              <div class="main-inner group">
                  <div class="content">
    
        <div class="pad group page-title">
                <ul class="meta-single group">
                  
                  <li><span class="fa fa-folder-open"></span></li>
                  
                  <li class="category">
                    <a rel="nofollow" href="../../categories/linux/" rel="category tag">linux</a>
                  </li>
                      
                  
                  <li><span class="fa fa-tags"></span></li>
                  
                </ul>
        </div>

        
        <div class="pad group">
            <article class="post type-post status-publish format-standard has-post-thumbnail hentry category-lifestyle tag-classical-grid tag-masonry-grid tag-standard-list">
                <div class="post-inner group">
                        <h1 class="post-title">Linux  php-fpm 优化</h1>

                        <p class="post-byline">
                          by  · 2016年01月07日 · 5446 Words ·
                          ~11min reading time |
                          
                          
                          <a rel="nofollow" href="https://gitlab.com/rinetd/blog/edit/master/linux/Linux%e7%b3%bb%e7%bb%9f%e4%bc%98%e5%8c%96-PHP-php-fpm%e9%85%8d%e7%bd%ae%e4%bc%98%e5%8c%96.md" target="_blank">Improve on <i class="fa fa-gitlab"></i></a>
                        </p>
                    <div class="clear"></div>
                    <div class="entry themeform">
                        <div class="entry-inner">
                            <p>原文作者：<a target="_blank" href="http://blog.pytool.com/">rinetd</a>
                            </br>
                            原文链接：<a target="_blank" href="http://blog.pytool.com/linux/linux%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96-php-php-fpm%E9%85%8D%E7%BD%AE%E4%BC%98%E5%8C%96/"> Linux  php-fpm 优化</a> 
                            </p>
                            <p>前言:</p>

<p>　　1.少安装PHP模块, 费内存</p>

<p>　　2.调高linux内核打开文件数量，可以使用这些命令(必须是root帐号)(我是修改/etc/rc.local，加入ulimit -SHn 51200的)</p>

<p>echo <code>ulimit -HSn 65536</code> &gt;&gt; /etc/profile<br />
echo <code>ulimit -HSn 65536</code> &gt;&gt; /etc/rc.local<br />
source /etc/profile<br />
　　如果<code>ulimit -n</code>数量依旧不多(即上面配置没生效)的话, 可以在 /etc/security/limits.conf 文件最后加上</p>

<ul>
<li>soft nofile 51200<br /></li>
<li>hard nofile 51200<br />
1.与Nginx使用Unix域Socket通信(Nginx和php-fpm在同一台服务器)<br />
<br /></li>
</ul>

<p>　　Unix域Socket因为不走网络，的确可以提高Nginx和php-fpm通信的性能，但在高并发时会不稳定。</p>

<p>　　Nginx会频繁报错：connect() to unix:/dev/shm/php-fcgi.sock failed (11: Resource temporarily unavailable) while connecting to upstream</p>

<p>　　可以通过下面两种方式提高稳定性：<br />
　　1）调高nginx和php-fpm中的backlog</p>

<pre><code>　　 配置方法为：在nginx配置文件中这个域名的server下，在listen 80后面添加default backlog=1024。
 　　同时配置php-fpm.conf中的listen.backlog为1024，默认为128。
</code></pre>

<p>　　2）增加sock文件和php-fpm实例数</p>

<pre><code> 　　再新建一个sock文件，在Nginx中通过upstream模块将请求负载均衡到两个sock文件背后的两套php-fpm实例上。
</code></pre>

<p>2.php-fpm参数调优</p>

<p>　　pm = dynamic; 表示使用哪种进程数量管理方式</p>

<p>　　　　dynamic表示php-fpm进程数是动态的，最开始是pm.start_servers指定的数量，如果请求较多，则会自动增加，保证空闲的进程数不小于pm.min_spare_servers，如果进程数较多，也会进行相应清理，保证多余的进程数不多于pm.max_spare_servers</p>

<p>　　　　static表示php-fpm进程数是静态的, 进程数自始至终都是pm.max_children指定的数量，不再增加或减少</p>

<p>　　pm.max_children = 300; 静态方式下开启的php-fpm进程数量<br />
　　pm.start_servers = 20; 动态方式下的起始php-fpm进程数量<br />
　　pm.min_spare_servers = 5; 动态方式下的最小php-fpm进程数量<br />
　　pm.max_spare_servers = 35; 动态方式下的最大php-fpm进程数量</p>

<p>　　　　如果pm为static, 那么其实只有pm.max_children这个参数生效。系统会开启设置数量的php-fpm进程</p>

<p>　　　　如果pm为dynamic, 那么pm.max_children参数失效，后面3个参数生效。系统会在php-fpm运行开始的时候启动pm.start_servers个php-fpm进程，然后根据系统的需求动态在pm.min_spare_servers和pm.max_spare_servers之间调整php-fpm进程数</p>

<p>　　　　那么，对于我们的服务器，选择哪种pm方式比较好呢？事实上，跟Apache一样，运行的PHP程序在执行完成后，或多或少会有内存泄露的问题。这也是为什么开始的时候一个php-fpm进程只占用3M左右内存，运行一段时间后就会上升到20-30M的原因了。</p>

<p>　　　　对于内存大的服务器（比如8G以上）来说，指定静态的max_children实际上更为妥当，因为这样不需要进行额外的进程数目控制，会提高效率。因为频繁开关php-fpm进程也会有时滞，所以内存够大的情况下开静态效果会更好。数量也可以根据 内存/30M 得到，比如8GB内存可以设置为100，那么php-fpm耗费的内存就能控制在 2G-3G的样子。如果内存稍微小点，比如1G，那么指定静态的进程数量更加有利于服务器的稳定。这样可以保证php-fpm只获取够用的内存，将不多的内存分配给其他应用去使用，会使系统的运行更加畅通。</p>

<p>　　　　对于小内存的服务器来说，比如256M内存的VPS，即使按照一个20M的内存量来算，10个php-cgi进程就将耗掉200M内存，那系统的崩溃就应该很正常了。因此应该尽量地控制php-fpm进程的数量，大体明确其他应用占用的内存后，给它指定一个静态的小数量，会让系统更加平稳一些。或者使用动态方式，因为动态方式会结束掉多余的进程，可以回收释放一些内存，所以推荐在内存较少的服务器或VPS上使用。具体最大数量根据 内存/20M 得到。比如说512M的VPS，建议pm.max_spare_servers设置为20。至于pm.min_spare_servers，则建议根据服务器的负载情况来设置，比较合适的值在5~10之间。</p>

<p>　　　　在4G内存的服务器上200就可以(我的1G测试机，开64个是最好的，建议使用压力测试获取最佳值)</p>

<p>　　pm.max_requests = 10240;</p>

<p>　　　　nginx php-fpm配置过程中最大问题是内泄漏出问题：服务器的负载不大，但是内存占用迅速增加，很快吃掉内存接着开始吃交换分区，系统很快挂掉！其实根据官方的介绍，php-cgi不存在内存泄漏，每个请求完成后php-cgi会回收内存，但是不会释放给操作系统，这样就会导致大量内存被php-cgi占用。<br />
　　　　</p>

<p>　　　　官方的解决办法是降低PHP_FCGI_MAX_REQUESTS的值，如果用的是php-fpm，对应的php-fpm.conf中的就是max_requests，该值的意思是发送多少个请求后会重启该线程，我们需要适当降低这个值，用以让php-fpm自动的释放内存，不是大部分网上说的51200等等，实际上还有另一个跟它有关联的值max_children，这个是每次php-fpm会建立多少个进程，这样实际上的内存消耗是max_children*max_requests*每个请求使用内存，根据这个我们可以预估一下内存的使用情况，就不用再写脚本去kill了。</p>

<p>　　request_terminate_timeout = 30;</p>

<p>　　　　最大执行时间, 在php.ini中也可以进行配置(max_execution_time)</p>

<p>　　request_slowlog_timeout = 2; 开启慢日志<br />
　　slowlog = log/$pool.log.slow; 慢日志路径</p>

<p>　　rlimit_files = 1024; 增加php-fpm打开文件描述符的限制</p>

<p>3.php-fpm的高CPU使用率排查方法</p>

<p>　　1)使用top命令, 直接执行top命令后，输入1就可以看到各个核心的CPU使用率。而且通过top -d 0.1可以缩短采样时间</p>

<p>　　2)查询php-fpm慢日志</p>

<p>grep -v &ldquo;^$&rdquo; www.log.slow.tmp | cut -d &ldquo; &rdquo; -f 3,2 | sort | uniq -c | sort -k1,1nr | head -n 50</p>

<p>复制代码<br />
   5181 run() /www/test.net/framework/web/filters/CFilter.php:41</p>

<p>5156 filter() /www/test.net/framework/web/filters/CFilterChain.php:131</p>

<p>2670 = /www/test.net/index.php</p>

<p>2636 run() /www/test.net/application/controllers/survey/index.php:665</p>

<p>2630 action() /www/test.net/application/controllers/survey/index.php:18</p>

<p>2625 run() /www/test.net/framework/web/actions/CAction.php:75</p>

<p>2605 runWithParams() /www/test.net/framework/web/CController.php:309</p>

<p>2604 runAction() /www/test.net/framework/web/filters/CFilterChain.php:134</p>

<p>2538 run() /www/test.net/framework/web/CController.php:292</p>

<p>2484 runActionWithFilters() /www/test.net/framework/web/CController.php:266</p>

<p>2251 run() /www/test.net/framework/web/CWebApplication.php:276</p>

<p>1799 translate() /www/test.net/application/libraries/Limesurvey_lang.php:118</p>

<p>1786 load_tables() /www/test.net/application/third_party/php-gettext/gettext.php:254</p>

<p>1447 runController() /www/test.net/framework/web/CWebApplication.php:135<br />
复制代码<br />
　　　　参数解释:</p>

<pre><code>            sort:  对单词进行排序
            uniq -c:  显示唯一的行，并在每行行首加上本行在文件中出现的次数
            sort -k1,1nr:  按照第一个字段，数值排序，且为逆序
            head -10:  取前10行数据
</code></pre>

<p>　　3)用strace跟踪进程</p>

<p>　　　　a)利用nohup将strace转为后台执行，直到attach上的php-fpm进程死掉为止：</p>

<p>nohup strace -T -p 13167 &gt; 13167-strace.log &amp;<br />
　　　　参数说明:</p>

<p>　　　　　  -c 统计每一系统调用的所执行的时间,次数和出错的次数等.</p>

<pre><code>            -d 输出strace关于标准错误的调试信息.
            -f 跟踪由fork调用所产生的子进程.
            -o filename,则所有进程的跟踪结果输出到相应的filename
            -F 尝试跟踪vfork调用.在-f时,vfork不被跟踪.
            -h 输出简要的帮助信息.
            -i 输出系统调用的入口指针.
            -q 禁止输出关于脱离的消息.
            -r 打印出相对时间关于,,每一个系统调用.
            -t 在输出中的每一行前加上时间信息.
            -tt 在输出中的每一行前加上时间信息,微秒级.
            -ttt 微秒级输出,以秒了表示时间.
            -T 显示每一调用所耗的时间.
            -v 输出所有的系统调用.一些调用关于环境变量,状态,输入输出等调用由于使用频繁,默认不输出.
            -V 输出strace的版本信息.
            -x 以十六进制形式输出非标准字符串
            -xx 所有字符串以十六进制形式输出.
            -a column
            设置返回值的输出位置.默认为40.
            -e execve 只记录 execve 这类系统调用
            -p 主进程号
</code></pre>

<p>　　　　b)用利用-c参数让strace帮助汇总，非常方便非常强大！</p>

<p>复制代码<br />
[root@b28-12 log]# strace -cp 9907</p>

<p>Process 9907 attached - interrupt to quit</p>

<p>Process 9907 detached</p>

<p>% time     seconds  usecs/call     calls    errors syscall</p>

<hr />

<p>56.61    0.016612           5      3121           read</p>

<p>11.11    0.003259           1      2517       715 stat</p>

<p>8.04    0.002358           7       349           brk</p>

<p>6.02    0.001767           1      1315           poll</p>

<p>4.28    0.001255           6       228           recvfrom</p>

<p>2.71    0.000796           1       671           open</p>

<p>2.54    0.000745           0      2453           fcntl</p>

<p>2.37    0.000696           1      1141           write</p>

<p>1.69    0.000497           1       593        13 access</p>

<p>1.37    0.000403           0      1816           lseek</p>

<p>0.89    0.000262           1       451        22 sendto</p>

<p>0.56    0.000163           1       276       208 lstat</p>

<p>0.49    0.000145           0       384           getcwd</p>

<p>0.31    0.000090           0      1222           fstat</p>

<p>0.28    0.000082           0       173           munmap</p>

<p>0.26    0.000077           0       174           mmap</p>

<p>0.24    0.000069           2        41           socket</p>

<p>0.23    0.000068           0       725           close</p>

<p>0.00    0.000000           0        13           rt_sigaction</p>

<p>0.00    0.000000           0        13           rt_sigprocmask</p>

<p>0.00    0.000000           0         1           rt_sigreturn</p>

<p>0.00    0.000000           0        78           setitimer</p>

<p>0.00    0.000000           0        26        26 connect</p>

<p>0.00    0.000000           0        15         2 accept</p>

<p>0.00    0.000000           0        39           recvmsg</p>

<p>0.00    0.000000           0        26           shutdown</p>

<p>0.00    0.000000           0        13           bind</p>

<p>0.00    0.000000           0        13           getsockname</p>

<p>0.00    0.000000           0        65           setsockopt</p>

<p>0.00    0.000000           0        13           getsockopt</p>

<p>0.00    0.000000           0         8           getdents</p>

<p>0.00    0.000000           0        26           chdir</p>

<p>0.00    0.000000           0         1           futex</p>

<hr />

<p>100.00    0.029344                 18000       986 total<br />
复制代码<br />
4.使用Opcode缓存(<a href="http://www.cnblogs.com/JohnABC/p/4531038.html" target="_blank">http://www.cnblogs.com/JohnABC/p/4531038.html</a>)</p>

<p>5.对PHP性能进行监控</p>

<p>　　常用的方法就是开启xdebug的性能监控功能，将xdebug输出结果通过WinCacheGrind软件分析。<br />
　　xdebug的安装和配合IDE调试的方法参见：Vim+XDebug调试PHP</p>

<p>　　php.ini中配置的这几项是输出性能信息的：<br />
xdebug.auto_trace = on<br />
xdebug.auto_profile = on<br />
xdebug.collect_params = on<br />
xdebug.collect_return = on<br />
xdebug.profiler_enable = on<br />
xdebug.trace_output_dir = &ldquo;/tmp&rdquo;<br />
xdebug.profiler_output_dir =&ldquo;/tmp&rdquo;</p>

<p>　　这样XDebug会输出所有执行php函数的性能数据，但产生的文件也会比较大。可以关闭一些选项如collect_params、collect_return，<br />
　　来减少输出的数据量。或者关闭自动输出，通过在想要监控的函数首尾调用xdebug函数来监控指定的函数。</p>

<p>　　输出的文件名类似cachegrind.out.1277560600和trace.3495983249.txt，可以拿到Windows平台下用WinCacheGrind进行图形化分析。<br />
6.监测php-fpm线程状态</p>

<p>　　nginx配置</p>

<p>location ~ ^/status$ {</p>

<pre><code>include fastcgi_params;
fastcgi_pass 127.0.0.1:9000;
fastcgi_param SCRIPT_FILENAME $fastcgi_script_name;
</code></pre>

<p>}<br />
　　php-fpm配置</p>

<p>pm.status_path = /status<br />
　　这样的话通过http://域名/status就可以看到当前的php情况</p>

<p>　　下面介绍每个参数的作用：<br />
　　pool：php-fpm池的名称，一般都是应该是www<br />
　　process manage：进程的管理方法，php-fpm支持三种管理方法，分别是static,dynamic和ondemand，一般情况下都是dynamic<br />
　　start time：php-fpm启动时候的时间，不管是restart或者reload都会更新这里的时间<br />
　　start since：php-fpm自启动起来经过的时间，默认为秒<br />
　　accepted conn：当前接收的连接数<br />
　　listen queue：在队列中等待连接的请求个数，如果这个数字为非0，那么最好增加进程的fpm个数<br />
　　max listen queue：从fpm启动以来，在队列中等待连接请求的最大值<br />
　　listen queue len：等待连接的套接字队列大小<br />
　　idle processes：空闲的进程个数<br />
　　active processes：活动的进程个数<br />
　　total processes：总共的进程个数<br />
　　max active processes：从fpm启动以来，活动进程的最大个数，如果这个值小于当前的max_children，可以调小此值<br />
　　max children reached：当pm尝试启动更多的进程，却因为max_children的限制，没有启动更多进程的次数。如果这个值非0，那么可以适当增加fpm的进程数<br />
　　slow requests：慢请求的次数，一般如果这个值未非0，那么可能会有慢的php进程，一般一个不好的mysql查询是最大的祸首。</p>

<p>7.开启php-fpm慢日志</p>

<p>　　slowlog = /usr/local/php/log/php-fpm.log.slow</p>

<p>　　request_slowlog_timeout = 5s</p>

<p>8.设置php-fpm单次请求最大执行时间，今天碰到一个问题，测试服务器php-fpm一直是被占满状态，后来发现是set_time_limit(0)，file_get_content()，原因如下:</p>

<p>　　比如file_get_contents(url)等函数，如果网站反应慢，会一直等在那儿不超时，php-fpm一直被占用。有一个参数 max_execution_time 可以设置 PHP 脚本的最大执行时间，但是，在 php-cgi(php-fpm) 中，该参数不会起效。真正能够控制 PHP 脚本最大执行时间的是 php-fpm.conf 配置文件中的以下参数。</p>

<p>　　request_terminate_timeout = 10s</p>

<p>　　默认值为 0 秒，也就是说，PHP 脚本会一直执行下去。这样，当所有的 php-cgi 进程都卡在 file_get_contents() 函数时，这台 Nginx+PHP 的 WebServer 已经无法再处理新的 PHP 请求了，Nginx 将给用户返回“502 Bad Gateway”。可以使用 request_terminate_timeout = 30s，但是如果发生 file_get_contents() 获取网页内容较慢的情况，这就意味着 150 个 php-cgi 进程，每秒钟只能处理 5 个请求，WebServer 同样很难避免“502 Bad Gateway”。php-cgi进程数不够用、php执行时间长、或者是php-cgi进程死掉，都会出现502错误。</p>

<p>　　要做到彻底解决，只能让 PHP 程序员们改掉直接使用 file_get_contents(&ldquo;<a href="http://example.com/&quot;" target="_blank">http://example.com/&quot;</a>) 的习惯，而是稍微修改一下，加个超时时间，用以下方式来实现 HTTP GET 请求。要是觉得麻烦，可以自行将以下代码封装成一个函数。</p>

<p>复制代码<br />
&lt;?php</p>

<pre><code>$ctx = stream_context_create(array(
   'http' =&gt; array(
       'timeout' =&gt; 1 //设置一个超时时间，单位为秒
       )
   )
);
file_get_contents(&quot;http://example.com/&quot;, 0, $ctx);
</code></pre>

<p>复制代码<br />
　　当然，导致 php-cgi 进程 CPU 100% 的原因不只有这一种，那么，怎么确定是 file_get_contents() 函数导致的呢？</p>

<p>　　首先，使用 top 命令查看 CPU 使用率较高的 php-cgi 进程。</p>

<p>复制代码<br />
top - 10:34:18 up 724 days, 21:01,  3 users,  load average: 17.86, 11.16, 7.69<br />
Tasks: 561 total,  15 running, 546 sleeping,   0 stopped,   0 zombie<br />
Cpu(s):  5.9%us,  4.2%sy,  0.0%ni, 89.4%id,  0.2%wa,  0.0%hi,  0.2%si,  0.0%st<br />
Mem:   8100996k total,  4320108k used,  3780888k free,   772572k buffers<br />
Swap:  8193108k total,    50776k used,  8142332k free,   412088k cached</p>

<p>PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND<br />
10747 www       18   0  360m  22m  12m R 100.6 0.3    0:02.60 php-cgi<br />
10709 www       16   0  359m  28m  17m R 96.8  0.4    0:11.34 php-cgi<br />
10745 www       18   0  360m  24m  14m R 94.8  0.3    0:39.51 php-cgi<br />
10707 www       18   0  360m  25m  14m S 77.4  0.3    0:33.48 php-cgi<br />
10782 www       20   0  360m  26m  15m R 75.5  0.3    0:10.93 php-cgi<br />
10708 www       25   0  360m  22m  12m R 69.7  0.3    0:45.16 php-cgi<br />
10683 www       25   0  362m  28m  15m R 54.2  0.4    0:32.65 php-cgi<br />
10711 www       25   0  360m  25m  15m R 52.2  0.3    0:44.25 php-cgi<br />
10688 www       25   0  359m  25m  15m R 38.7  0.3    0:10.44 php-cgi<br />
10719 www       25   0  360m  26m  16m R  7.7  0.3    0:40.59 php-cgi<br />
复制代码<br />
　　找其中一个 CPU 100% 的 php-cgi 进程的 PID，用以下命令跟踪一下：</p>

<p>strace -p 10747<br />
　　如果屏幕显示：</p>

<p>复制代码<br />
select(7, [6], [6], [], {15, 0})        = 1 (out [6], left {15, 0})<br />
poll([{fd=6, events=POLLIN}], 1, 0)     = 0 (Timeout)<br />
select(7, [6], [6], [], {15, 0})        = 1 (out [6], left {15, 0})<br />
poll([{fd=6, events=POLLIN}], 1, 0)     = 0 (Timeout)<br />
select(7, [6], [6], [], {15, 0})        = 1 (out [6], left {15, 0})<br />
poll([{fd=6, events=POLLIN}], 1, 0)     = 0 (Timeout)<br />
select(7, [6], [6], [], {15, 0})        = 1 (out [6], left {15, 0})<br />
poll([{fd=6, events=POLLIN}], 1, 0)     = 0 (Timeout)<br />
select(7, [6], [6], [], {15, 0})        = 1 (out [6], left {15, 0})<br />
poll([{fd=6, events=POLLIN}], 1, 0)     = 0 (Timeout)<br />
select(7, [6], [6], [], {15, 0})        = 1 (out [6], left {15, 0})<br />
poll([{fd=6, events=POLLIN}], 1, 0)     = 0 (Timeout)<br />
select(7, [6], [6], [], {15, 0})        = 1 (out [6], left {15, 0})<br />
poll([{fd=6, events=POLLIN}], 1, 0)     = 0 (Timeout)<br />
select(7, [6], [6], [], {15, 0})        = 1 (out [6], left {15, 0})<br />
poll([{fd=6, events=POLLIN}], 1, 0)     = 0 (Timeout)<br />
select(7, [6], [6], [], {15, 0})        = 1 (out [6], left {15, 0})<br />
poll([{fd=6, events=POLLIN}], 1, 0)     = 0 (Timeout)<br />
select(7, [6], [6], [], {15, 0})        = 1 (out [6], left {15, 0})<br />
poll([{fd=6, events=POLLIN}], 1, 0)     = 0 (Timeout)<br />
复制代码<br />
　　那么，就可以确定是 file_get_contents() 导致的问题了。(参考:<a href="http://zyan.cc/tags/request_terminate_timeout/1/" target="_blank">http://zyan.cc/tags/request_terminate_timeout/1/</a>)</p>

<p>9.查看php-fpm启动时间(可以得出执行了多长时间)</p>

<p>ps -A -o pid,lstart,cmd |grep php-fpm<br />
10.</p>

                        </div>                      
                        <div class="clear"></div>
                    </div>
                </div>
            </article>   
            <div class="clear"></div>
            <p class="post-tags">
                <span>Tags:</span>
                <a href="https://demo-hueman.presscustomizr.com/tag/classical-grid/" rel="tag">classical-grid</a>
                <a href="https://demo-hueman.presscustomizr.com/tag/masonry-grid/" rel="tag">masonry-grid</a>
                <a href="https://demo-hueman.presscustomizr.com/tag/standard-list/" rel="tag">standard-list</a>
            </p>

            
            <div id="related-posts">
                <div class="related-inner">
                </div>
            </div>
            
            <section id="comments" class="themeform">
                    
                
            </section>
        </div>
</div>
                  <div class="sidebar s1 collapsed" data-position="left" data-layout="col-3cm" data-sb-id="s1">
    <a class="sidebar-toggle" title="Expand Sidebar">
        <i class="fas icon-sidebar-toggle"></i>
    </a>
    <div class="sidebar-content">
        <div class="sidebar-top group">
            <p>Follow:</p>  
                          
<ul class="social-links">
    
    
    
    

    
    <li>
        <a class="social-tooltip" href="mailto:" title="Email">
            <i class="fa fa-envelope"></i></a>
    </li>

    
    <li>
        <a class="social-tooltip"  href="//github.com/" title="GitHub"><i
                class="fab fa-github"></i></a>
    </li>

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    
    <li>
        <a rel="nofollow" class="social-tooltip" title="RSS Feed"
            aria-label="RSS Feed"
            href="../../feed" target="_blank"
            style="color:rgba(255,255,255,0.7)">
            <i class="fas fa-rss"></i>
        </a>
    </li>

</ul>
   
        </div>
            <ul class="post-nav group">
    <li class="previous">
      
      <a href="http://blog.pytool.com/linux/linux-backlog%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/" rel="prev">
        <i class="fa fa-chevron-left"></i>
        <strong>Previous Post</strong>
        <span>Linux  php-fpm backlog参数潜在问题</span>
      </a>
      
  </li>
</ul>

            
            <div id="categories-2" class="widget widget_categories"><h3>分类</h3>
  <ul>
    
      <li class="cat-item cat-item-1">
        <a rel="nofollow" href="../../categories/android/">Android</a>
        <small>(17)</small>
      </li>
    
      <li class="cat-item cat-item-1">
        <a rel="nofollow" href="../../categories/blog/">Blog</a>
        <small>(2)</small>
      </li>
    
      <li class="cat-item cat-item-1">
        <a rel="nofollow" href="../../categories/devops/">Devops</a>
        <small>(61)</small>
      </li>
    
      <li class="cat-item cat-item-1">
        <a rel="nofollow" href="../../categories/docker/">Docker</a>
        <small>(15)</small>
      </li>
    
      <li class="cat-item cat-item-1">
        <a rel="nofollow" href="../../categories/golang/">Golang</a>
        <small>(68)</small>
      </li>
    
      <li class="cat-item cat-item-1">
        <a rel="nofollow" href="../../categories/linux/">Linux</a>
        <small>(77)</small>
      </li>
    
      <li class="cat-item cat-item-1">
        <a rel="nofollow" href="../../categories/linux-%E5%91%BD%E4%BB%A4/">Linux-命令</a>
        <small>(110)</small>
      </li>
    
      <li class="cat-item cat-item-1">
        <a rel="nofollow" href="../../categories/windows/">Windows</a>
        <small>(5)</small>
      </li>
    
      <li class="cat-item cat-item-1">
        <a rel="nofollow" href="../../categories/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/">前端技术</a>
        <small>(3)</small>
      </li>
    
      <li class="cat-item cat-item-1">
        <a rel="nofollow" href="../../categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/">嵌入式</a>
        <small>(22)</small>
      </li>
    
      <li class="cat-item cat-item-1">
        <a rel="nofollow" href="../../categories/%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/">常用算法</a>
        <small>(2)</small>
      </li>
    
      <li class="cat-item cat-item-1">
        <a rel="nofollow" href="../../categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
        <small>(29)</small>
      </li>
    
      <li class="cat-item cat-item-1">
        <a rel="nofollow" href="../../categories/%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91/">文本编辑</a>
        <small>(27)</small>
      </li>
    
      <li class="cat-item cat-item-1">
        <a rel="nofollow" href="../../categories/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">正则表达式</a>
        <small>(3)</small>
      </li>
    
      <li class="cat-item cat-item-1">
        <a rel="nofollow" href="../../categories/%E7%94%9F%E6%B4%BB%E6%8A%80%E5%B7%A7/">生活技巧</a>
        <small>(4)</small>
      </li>
    
      <li class="cat-item cat-item-1">
        <a rel="nofollow" href="../../categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/">网络安全</a>
        <small>(39)</small>
      </li>
    
      <li class="cat-item cat-item-1">
        <a rel="nofollow" href="../../categories/%E9%9B%86%E7%BE%A4%E7%9B%91%E6%8E%A7/">集群监控</a>
        <small>(6)</small>
      </li>
    
      <li class="cat-item cat-item-1">
        <a rel="nofollow" href="../../categories/%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/">静态博客</a>
        <small>(12)</small>
      </li>
    
  </ul>

</div>


    </div>
</div>
                  <div class="sidebar s2 collapsed" data-position="right" data-layout="col-3cm" data-sb-id="s2">
        <a class="sidebar-toggle" title="Expand Sidebar">
            <i class="fas icon-sidebar-toggle"></i>
        </a>
        <div class="sidebar-content">
            <div class="sidebar-top group">
                <p>More</p>
            </div>
            <ul class="post-nav group">
    <li class="next">
      
      <a href="http://blog.pytool.com/hardware/android-%E5%BA%95%E5%B1%82/2016-01-07-linux%E5%86%85%E6%A0%B8-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%A7%BB%E6%A4%8D/" rel="next">
        <i class="fa fa-chevron-right"></i>
        <strong>Next post</strong>
        <span>Linux内核及文件系统移植</span>
      </a>
      
  </li>
</ul>


        </div>
    </div>
              </div>
              
          </div>
      
   
  </div>
 
 
</div>
<footer id="footer">
    <section class="container" id="footer-bottom">
      <div class="container-inner">
        <a id="back-to-top" href="#"><i class="fa fa-angle-up"></i></a>
        <div class="pad group">
          <div class="grid one-half">
            <div id="copyright">
                <p>Copyright (c) 2017. All rights reserved. (版权所有) <a href='http://www.miitbeian.gov.cn/'>鲁ICP备17074587号-1</a></p>
                
            </div>
            
          </div>
          
          <div class="grid one-half last">
            <ul class="social-links">
    <li>
    <a class="social-tooltip" title="On WeiBo" rel="nofollow"
        href="http://weibo.com/rinetd" target="_blank">
        <i class="fa fa-weibo"></i>
    </a>
    </li>
    <li>
    <a class="social-tooltip" title="On Twitter" rel="nofollow"
        href="https://twitter.com/rinetd" target="_blank">
        <i class="fa fa-twitter"></i>
    </a>
    </li>
    <li>
    <a class="social-tooltip" title="On GitHub" rel="nofollow"
        href="https://github.com/rinetd" target="_blank">
        <i class="fa fa-github"></i>
    </a>
    </li>
</ul>

          </div>
        </div>
  
      </div>
      
    </section>
    
  </footer>



<script type='text/javascript'>
    var HUParams={
        "_disabled":[],
        "SmoothScroll":{
            "Enabled":true,
            "Options":{"touchpadSupport":false}
        },
        "centerAllImg":"1",
        "timerOnScrollAllBrowsers":"1",
        "extLinksStyle":"1",
        "extLinksTargetExt":"1",
        "extLinksSkipSelectors":{
            "classes":["btn","button"],"ids":[]
        },
        "imgSmartLoadEnabled":"1",
        "imgSmartLoadOpts":{
            "parentSelectors":[".container .content",".container .sidebar","#footer","#header-widgets"],
            "opts":{
                "excludeImg":[".tc-holder-img"],
                "fadeIn_options":100
            }
        },
        "goldenRatio":"1.618","gridGoldenRatioLimit":"350",
        "sbStickyUserSettings":{"desktop":true,"mobile":true},
        "isWPMobile":"",
        "menuStickyUserSettings":{
            "desktop":"stick_up",
            "mobile":"stick_up"
        },
        "isDevMode":"",
        "ajaxUrl":"https:\/\/demo-hueman.presscustomizr.com\/?huajax=1",
            "frontNonce":{"id":"HuFrontNonce","handle":"798e5956c0"},
            "userStarted":{"with":"before|1.0.4","on":{"date":"2017-05-22 16:30:22.000000","timezone_type":3,"timezone":"UTC"}},
            "isWelcomeNoteOn":"","welcomeContent":""};
</script>



<script src="https://cdn.bootcss.com/lodash-compat/3.10.2/lodash.min.js"></script>
<script src="https://cdn.bootcss.com/jquery/1.9.0/jquery.min.js"></script>
<script type="text/javascript"  src="../../front/js/scripts.js"></script> 

























</body>
</html>

